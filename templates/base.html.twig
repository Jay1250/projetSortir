<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        {% block stylesheets %}
            <link rel="stylesheet" href="{{ asset('vendor/bootstrap/css/bootstrap.min.css') }}">
            <link rel="stylesheet" href="{{ asset('css/style.css') }}">
        {% endblock %}
    </head>
    <body>
        {%  if is_granted('IS_AUTHENTICATED_FULLY')%}
            {{ include('_nav.html.twig')}}
        {%  endif %}
        <div class="container-fluid mt-4">
            {% block body %}{% endblock %}
            {% block javascripts %}
                <!-- Bootstrap core JavaScript -->
                <script src="{{ asset('vendor/jquery/jquery.min.js') }}"></script>
                <script src="{{ asset('vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
                <SCRIPT type="text/javascript">
                    $( "#lieuSelect" ).change(function() {
                        alert( "Handler for .change() called." );
                        $.ajax({
                            url:"{{ path('FiltrerSortieLieux') }}",
                            type: "GET",
                            dataType:"json",
                            data:{
                                "lieu":$(this).children("option:selected").val()
                            },
                            async: true,
                            success:function(data)
                            {
                                console.log(data);
                                $('#nomLieu').text(data.nomLieu);
                            }
                        })
                            .fail(function( jqXHR, textStatus ) {
                                alert( "Request failed: " + textStatus );
                            })
                    });
                </SCRIPT>
            {% endblock %}
        </div>
    </body>
</html>
